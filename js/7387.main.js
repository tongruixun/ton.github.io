(self.webpackChunktoy=self.webpackChunktoy||[]).push([[7387,9238],{7387:(e,t,r)=>{"use strict";r.r(t),r.d(t,{accountLogin:()=>o,deviceApi:()=>a,monitorItemPoint:()=>u});var n=r(9238);function o(e){return n.login.post("/monitor/oauth/oauth/token",null,{params:e})}var a={getBaseTerminals:function(){return(0,n.default)({url:"/monitor/project/terminal/baseTerminals",method:"get"})},getGenerateId:function(e){return(0,n.default)({url:"/monitor/project/terminal/generate/usableNumber",method:"get",params:{deviceType:e}})},addTerminals:function(e){return(0,n.default)({url:"/monitor/project/terminal/addTerminals",method:"post",data:e})},getTerminalDetail:function(e){return(0,n.default)({url:"/monitor/project/terminal/detail",method:"get",params:{terminalId:e}})},getBaseSensor:function(e){return(0,n.default)({url:"/monitor/project/sensor/baseSensors",method:"get",params:{baseTerminalId:e}})},addSensors:function(e){return(0,n.default)({url:"/monitor/project/sensor/addSensors",method:"post",data:e})}},u={getMonitorItems:function(e){return(0,n.default)({url:"/monitor/project/v2/pointManage/item/".concat(e),method:"get"})},getGroupNameByMonitorItem:function(e){return(0,n.default)({url:"/monitor/project/v2/pointManage/groupName",method:"get",params:e})},getSensorByMonitorItem:function(e){return(0,n.default)({url:"/monitor/project/formula/sensorInfo",method:"get",params:e})},addPoint:function(e){return(0,n.default)({url:"/monitor/project/v2/pointManage/point",method:"post",data:e})}}},9238:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,login:()=>c});var n=r(9669),o=r.n(n),a=r(7359),u={BASIC_AUTH_HEADER:"Basic dGVzdF9jbGllbnQ6c2NyaXQ=",API_BASE_URL:"http://gateway.zdjcyun.com"},i=o().create({baseURL:u.API_BASE_URL});i.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(a.default.getToken()),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){var t=e.data,r=t.code,n=t.msg;if(console.log(r,n),"401"==="".concat(r))return Promise.reject(new Error("登录过期"));if("403"==="".concat(r))return Promise.reject(new Error("无权限访问"));if("200"!=="".concat(r)){var o=new Error(n||"请求错误");return o.response=e,Promise.reject(o)}return e.data}),(function(e){return Promise.reject(e)}));const s=i;var c=o().create({baseURL:u.API_BASE_URL,headers:{Authorization:u.BASIC_AUTH_HEADER}});c.interceptors.response.use((function(e){var t=e.data.code;return"401"==="".concat(t)?(a.default.removeToken(),Promise.reject(new Error("登录过期"))):e.data}),(function(e){return Promise.reject(e)}))},7359:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(4575),o=r.n(n),a=r(3913),u=r.n(a),i="zy_token";const s=function(){function e(){o()(this,e)}return u()(e,null,[{key:"getToken",value:function(){return sessionStorage.getItem(i)}},{key:"setToken",value:function(e){sessionStorage.setItem(i,e)}},{key:"removeToken",value:function(){sessionStorage.removeItem(i)}}]),e}()}}]);