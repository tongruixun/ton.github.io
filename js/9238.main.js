(self.webpackChunktoy=self.webpackChunktoy||[]).push([[9238],{9238:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,login:()=>i});var n=t(9669),o=t.n(n),s=t(7359),c={BASIC_AUTH_HEADER:"Basic dGVzdF9jbGllbnQ6c2NyaXQ=",API_BASE_URL:"http://gateway.zdjcyun.com"},a=o().create({baseURL:c.API_BASE_URL});a.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(s.default.getToken()),e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){var r=e.data,t=r.code,n=r.msg;if(console.log(t,n),"401"==="".concat(t))return Promise.reject(new Error("登录过期"));if("403"==="".concat(t))return Promise.reject(new Error("无权限访问"));if("200"!=="".concat(t)){var o=new Error(n||"请求错误");return o.response=e,Promise.reject(o)}return e.data}),(function(e){return Promise.reject(e)}));const u=a;var i=o().create({baseURL:c.API_BASE_URL,headers:{Authorization:c.BASIC_AUTH_HEADER}});i.interceptors.response.use((function(e){var r=e.data.code;return"401"==="".concat(r)?(s.default.removeToken(),Promise.reject(new Error("登录过期"))):e.data}),(function(e){return Promise.reject(e)}))},7359:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var n=t(4575),o=t.n(n),s=t(3913),c=t.n(s),a="zy_token";const u=function(){function e(){o()(this,e)}return c()(e,null,[{key:"getToken",value:function(){return sessionStorage.getItem(a)}},{key:"setToken",value:function(e){sessionStorage.setItem(a,e)}},{key:"removeToken",value:function(){sessionStorage.removeItem(a)}}]),e}()}}]);